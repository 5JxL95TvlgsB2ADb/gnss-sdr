import os ;

local GTEST_DIR = [ os.environ GTEST_DIR ] ;
project gtest : source-location $(GTEST_DIR)/src : build-dir ../../build ; 

lib gtest
   : gtest-all.cc               # sources
   : <include>$(GTEST_DIR)      # requirements
     <include>$(GTEST_DIR)/include 
     <link>static ;


lib glog ;
lib gflags ;
lib gnuradio-core ;

project : requirements
<define>OMNITHREAD_POSIX
<cxxflags>"-std=c++0x -fno-builtin-malloc -fno-builtin-calloc -fno-builtin-realloc -fno-builtin-free"
<linkflags>"-larmadillo -lboost_system -lboost_filesystem -lboost_thread -lboost_date_time -llapack -lblas -lprofiler -ltcmalloc -lvolk"
<include>src/algorithms/acquisition/adapters
<include>src/algorithms/acquisition/gnuradio_blocks
<include>src/algorithms/channel/adapters
<include>src/algorithms/channel/gnuradio_blocks
<include>src/algorithms/channel/libs
<include>src/algorithms/conditioner/adapters
<include>src/algorithms/conditioner/gnuradio_blocks
<include>src/algorithms/input_filter/adapters
<include>src/algorithms/input_filter/gnuradio_blocks
<include>src/algorithms/libs
<include>src/algorithms/observables/adapters
<include>src/algorithms/observables/gnuradio_blocks
<include>src/algorithms/output_filter/adapters
<include>src/algorithms/output_filter/gnuradio_blocks
<include>src/algorithms/PVT/adapters
<include>src/algorithms/PVT/gnuradio_blocks
<include>src/algorithms/PVT/libs
<include>src/algorithms/resampler/adapters
<include>src/algorithms/resampler/gnuradio_blocks
<include>src/algorithms/signal_source/adapters
<include>src/algorithms/signal_source/gnuradio_blocks
<include>src/algorithms/telemetry_decoder/adapters
<include>src/algorithms/telemetry_decoder/gnuradio_blocks
<include>src/algorithms/telemetry_decoder/libs
<include>src/algorithms/tracking/adapters
<include>src/algorithms/tracking/gnuradio_blocks
<include>src/algorithms/tracking/libs
<include>src/core/interfaces
<include>src/core/libs
<include>src/core/receiver
<include>src/core/system_parameters
#<include>$GNURADIO_ROOT/gr-usrp/src
<include>$GNURADIO_ROOT/gnuradio-core/src/lib/runtime
<include>$GNURADIO_ROOT/gnuradio-core/src/lib/filter
<include>$GNURADIO_ROOT/gnuradio-core/src/lib/io
<include>$GNURADIO_ROOT/gnuradio-core/src/lib/general
<include>$GNURADIO_ROOT/gnuradio-core/src/lib/gengen
<include>$GNURADIO_ROOT/volk/lib
<include>$(GTEST_DIR)/include
<threading>multi 
<toolset>darwin:<include>/opt/local/include ;

build-project src ;
