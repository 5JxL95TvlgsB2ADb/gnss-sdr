project : build-dir ../../build ;

local GN3S_DRIVER = [ modules.peek : GN3S_DRIVER ] ; 
local RTLSDR_DRIVER = [ modules.peek : RTLSDR_DRIVER ] ; 

if ($(GN3S_DRIVER))
{
	GN3S_DRIVER_INCLUDE1 = "../algorithms/signal_source/adapters//gn3s_signal_source" ;
	GN3S_DRIVER_INCLUDE2 = "../..//gr-gn3s" ;
}

if ($(RTLSDR_DRIVER))
{
	RTLSDR_DRIVER_INCLUDE1 = "../algorithms/signal_source/adapters//rtlsdr_signal_source" ;
	RTLSDR_DRIVER_INCLUDE2 = "../..//gnuradio-osmosdr" ;
}

exe run_tests : test_main.cc 
../algorithms/acquisition/adapters//gps_l1_ca_pcps_acquisition
../algorithms/acquisition/adapters//galileo_e1_pcps_ambiguous_acquisition
../algorithms/acquisition/gnuradio_blocks//pcps_acquisition_cc
../algorithms/channel/adapters//channel
../algorithms/channel/libs//gps_l1_ca_channel_fsm
../algorithms/conditioner/adapters//signal_conditioner
../algorithms/data_type_adapter/adapters//ishort_to_complex
../algorithms/input_filter/adapters//fir_filter
../algorithms/input_filter/adapters//freq_xlating_fir_filter
../algorithms/libs//nco_lib
../algorithms/libs//gnss_signal_processing
../algorithms/libs//gps_sdr_signal_processing
../algorithms/libs//galileo_e1_signal_processing
../algorithms/libs//gnss_sdr_valve
../algorithms/libs//pass_through
../algorithms/observables/adapters//gps_l1_ca_observables
../algorithms/observables/gnuradio_blocks//gps_l1_ca_observables_cc
../algorithms/PVT/libs//rinex_printer
../algorithms/PVT/libs//kml_printer
../algorithms/PVT/libs//nmea_printer
../algorithms/PVT/libs//gps_l1_ca_ls_pvt
../algorithms/output_filter/adapters//file_output_filter
../algorithms/output_filter/adapters//null_sink_output_filter
../algorithms/resampler/adapters//direct_resampler_conditioner
../algorithms/resampler/gnuradio_blocks//direct_resampler_conditioner_cc
../algorithms/signal_source/adapters//file_signal_source
../algorithms/signal_source/adapters//uhd_signal_source
../algorithms/telemetry_decoder/adapters//gps_l1_ca_telemetry_decoder
../algorithms/telemetry_decoder/gnuradio_blocks//gps_l1_ca_telemetry_decoder_cc
../algorithms/telemetry_decoder/libs//gps_l1_ca_subframe_fsm
../algorithms/PVT/adapters//gps_l1_ca_pvt
../algorithms/PVT/gnuradio_blocks//gps_l1_ca_pvt_cc
../algorithms/tracking/adapters//gps_l1_ca_dll_pll_tracking
../algorithms/tracking/adapters//gps_l1_ca_dll_pll_optim_tracking
../algorithms/tracking/adapters//gps_l1_ca_dll_fll_pll_tracking
../algorithms/tracking/adapters//gps_l1_ca_tcp_connector_tracking
../algorithms/tracking/adapters//galileo_e1_dll_pll_veml_tracking
../algorithms/tracking/adapters//galileo_e1_tcp_connector_tracking
../algorithms/tracking/gnuradio_blocks//gps_l1_ca_dll_pll_tracking_cc
../algorithms/tracking/gnuradio_blocks//gps_l1_ca_dll_pll_optim_tracking_cc
../algorithms/tracking/gnuradio_blocks//gps_l1_ca_dll_fll_pll_tracking_cc
../algorithms/tracking/gnuradio_blocks//gps_l1_ca_tcp_connector_tracking_cc
../algorithms/tracking/gnuradio_blocks//galileo_e1_dll_pll_veml_tracking_cc
../algorithms/tracking/gnuradio_blocks//galileo_e1_tcp_connector_tracking_cc
../algorithms/tracking/libs//tracking_discriminators
../algorithms/tracking/libs//lock_detectors
../algorithms/tracking/libs//tracking_FLL_PLL_filter
../algorithms/tracking/libs//tracking_2nd_PLL_filter
../algorithms/tracking/libs//tracking_2nd_DLL_filter
../algorithms/tracking/libs//correlator
../algorithms/tracking/libs//cordic
../algorithms/tracking/libs//tcp_communication
../algorithms/tracking/libs//tcp_packet_data
../core/libs//INIReader
../core/libs//ini
../core/libs//string_converter
../core/receiver//control_message_factory
../core/receiver//control_thread
../core/receiver//file_configuration
../core/receiver//in_memory_configuration
../core/receiver//gnss_block_factory
../core/receiver//gnss_flowgraph
../core/system_parameters//gps_navigation_message
../core/system_parameters//gnss_satellite
../core/system_parameters//gnss_signal
#../core/system_parameters//gnss_synchro
../..//gflags
../..//glog
../..//gnuradio-core
../..//uhd
../..//gnuradio-uhd
# GN3S DRIVER
$(GN3S_DRIVER_INCLUDE1)
$(GN3S_DRIVER_INCLUDE2)
# RTLSDR DRIVER
$(RTLSDR_DRIVER_INCLUDE1)
$(RTLSDR_DRIVER_INCLUDE2)
../..//gtest : <include>$(GTEST_DIR)/include ;

install ../../install : run_tests ;
